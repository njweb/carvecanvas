!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.carvecanvas=t()}}(function(){return function t(n,e,r){function o(s,u){if(!e[s]){if(!n[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(i)return i(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var a=e[s]={exports:{}};n[s][0].call(a.exports,function(t){var e=n[s][1][t];return o(e?e:t)},a,a.exports,t,n,e,r)}return e[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={nil:-1,moveTo:0,lineTo:1,bezierTo:2,quadTo:3};e.instructionCodes=r,e["default"]=r},{}],2:[function(t,n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.carve=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=t("./codes"),i=t("./path"),s=t("./transform"),u=t("./instructions"),c=function(t,n){return n=n||{},t.instructions=n.instructions||[],t.iIndex=Number.isInteger(n.instructionIndex)?n.instructionIndex:0,t.transforms=n.transforms||[],t.tIndex=Number.isInteger(n.transformIndex)?n.transformIndex:0,t.tLowerBound=Number.isInteger(n.transformLowerBound)?n.transformLowerBound:0,t.instructor=n.instructor,t},f=function(t,n){return n<t.length&&(t[n]=-1),t},a={cache:[[0,0],[0,0],[0,0]],moveTo:function(t){return this.iIndex=(0,i.moveTo)(this.instructions,this.iIndex,this.applyTransform(this.cache[0],this.getTransform(this.cache[0]),t)),this},lineTo:function(t){return this.iIndex=(0,i.lineTo)(this.instructions,this.iIndex,this.applyTransform(this.cache[0],this.getTransform(this.cache[0]),t)),this},quadTo:function(t,n){return this.iIndex=(0,i.quadTo)(this.instructions,this.iIndex,this.applyTransform(this.cache[0],this.getTransform(this.cache[0]),t),this.applyTransform(this.cache[1],this.getTransform(this.cache[1]),n)),this},bezierTo:function(t,n,e){return this.iIndex=(0,i.bezierTo)(this.instructions,this.iIndex,this.applyTransform(this.cache[0],this.getTransform(this.cache[0]),t),this.applyTransform(this.cache[1],this.getTransform(this.cache[1]),n),this.applyTransform(this.cache[2],this.getTransform(this.cache[2]),e)),this},getInstructions:function(){return this.instructions},getTransform:function(t){return 0===this.tIndex?(t[0]=0,t[1]=0):(t[0]=this.transforms[this.tIndex-2],t[1]=this.transforms[this.tIndex-1]),t},applyTransform:function(t,n,e){return 0===this.tIndex?(t[0]=e[0],t[1]=e[1]):(0,s.apply)(t,n,e),t},pushTransform:function(t){return this.tIndex=(0,s.push)(this.transforms,this.tIndex,(0,s.merge)(this.cache[0],this.getTransform(this.cache[0]),t)),this},pushGlobalTransform:function(t){return this.tIndex=(0,s.push)(this.transforms,this.tIndex,t),this},popTransform:function(){return this.tIndex=(0,s.pop)(this.tIndex,this.tLowerBound),this},sequence:function(t,n){var e=this.tIndex,r=this.tLowerBound;return this.tLowerBound=this.tIndex,t(this,n),this.tIndex=e,this.tLowerBound=r,this},branch:function l(t,n){n=n||{},n.instructor=n.instructor||this.instructor;var l=c(Object.create(Object.getPrototypeOf(this)),n);return this.getTransform(l.transforms),l.tLowerBound=2,t(l,n.state),f(l.instructions,l.iIndex)}},h=function(t,n){return t[0]=n[0],t[1]=n[1],t},d=function(t,n){if(void 0!==n&&"object"!==("undefined"==typeof n?"undefined":r(n)))throw TypeError("configuration must be an object");n=n||{};var e=void 0;if(void 0!==n.projection){if("function"!=typeof n.projection)throw TypeError("configuration.projection must be a function");e=n.projection}else e=h;var i=(0,u.instructions)(t,e),s=[];s[o.instructionCodes.moveTo]=i.moveTo,s[o.instructionCodes.lineTo]=i.lineTo,s[o.instructionCodes.quadTo]=i.quadTo,s[o.instructionCodes.bezierTo]=i.bezierTo;var d=function(t){for(var n=0;n<t.length&&t[n]!=-1;)n=s[t[n]](t,n)},l=function(n){var e=f(this.instructions,this.iIndex),r=function(){d(e)};return"function"==typeof n?n(t,r):r(),this.iIndex=0,this},p=c(Object.create(Object.assign({},{commit:l},a)),n);return{sequence:function(t,n){return t(p,n),p.instructions},commit:d}};e.carve=d,e["default"]=d},{"./codes":1,"./instructions":3,"./path":4,"./transform":5}],3:[function(t,n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,n){var e=[[0,0],[0,0],[0,0]];return{moveTo:function(r,o){var i=n(e[0],r.slice(o+1,o+3));return t.moveTo(i[0],i[1]),o+3},lineTo:function(r,o){var i=n(e[0],r.slice(o+1,o+3));return t.lineTo(i[0],i[1]),o+3},quadTo:function(r,o){var i=n(e[0],r.slice(o+1,o+3)),s=n(e[1],r.slice(o+3,o+5));return t.quadraticCurveTo(i[0],i[1],s[0],s[1]),o+5},bezierTo:function(r,o){var i=n(e[0],r.slice(o+1,o+3)),s=n(e[1],r.slice(o+3,o+5)),u=n(e[2],r.slice(o+5,o+7));return t.bezierCurveTo(i[0],i[1],s[0],s[1],u[0],u[1]),o+7}}};e.instructions=r,e["default"]={instructions:r}},{}],4:[function(t,n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bezierTo=e.quadTo=e.lineTo=e.moveTo=void 0;var r=t("./codes.js"),o=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0];return t[n]=r.instructionCodes.moveTo,t[n+1]=e[0],t[n+2]=e[1],n+=3},i=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0];return t[n]=r.instructionCodes.lineTo,t[n+1]=e[0],t[n+2]=e[1],n+=3},s=function(t,n,e,o){return t[n]=r.instructionCodes.quadTo,t[n+1]=e[0],t[n+2]=e[1],t[n+3]=o[0],t[n+4]=o[1],n+=5},u=function(t,n,e,o,i){return t[n]=r.instructionCodes.bezierTo,t[n+1]=e[0],t[n+2]=e[1],t[n+3]=o[0],t[n+4]=o[1],t[n+5]=i[0],t[n+6]=i[1],n+7};e.moveTo=o,e.lineTo=i,e.quadTo=s,e.bezierTo=u,e["default"]={moveTo:o,lineTo:i,quadTo:s,bezierTo:u}},{"./codes.js":1}],5:[function(t,n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,n,e){return t[n]=e[0],t[n+1]=e[1],n+2},o=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.max(t-2,Math.max(n,0))},i=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t},s=function(t,n,e){return i(t,n,e)};e.push=r,e.pop=o,e.merge=i,e.apply=s,e["default"]={push:r,pop:o,merge:i}},{}]},{},[2])(2)});